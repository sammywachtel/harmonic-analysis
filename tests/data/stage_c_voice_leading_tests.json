{
  "description": "Stage C Voice-Leading Event Detection Test Data",
  "version": "1.0",
  "categories": {
    "suspensions": "4→3 suspension patterns and resolutions",
    "leading_tones": "7→1 leading tone resolutions",
    "augmented_sixths": "♯4→5 augmented sixth resolutions",
    "phrygian": "♭6→5 Phrygian resolutions",
    "melody_alignment": "Melody-chord timing alignment tests",
    "complex": "Multiple simultaneous voice-leading events"
  },
  "voice_leading_tests": [
    {
      "name": "basic_cadential_64_suspension",
      "category": "suspensions",
      "description": "Classic 4→3 suspension from cadential 6/4",
      "chord_symbols": ["C/G", "G7", "C"],
      "key": "C major",
      "tokens": [
        {"roman": "I64", "role": "T"},
        {"roman": "V7", "role": "D"},
        {"roman": "I", "role": "T"}
      ],
      "expected": {
        "voice_4_to_3": [false, true, false],
        "resolution_position": 1,
        "pattern_type": "suspension"
      }
    },
    {
      "name": "dominant_seventh_resolution",
      "category": "leading_tones",
      "description": "7→1 leading tone resolution in V7→I",
      "chord_symbols": ["F", "G7", "C"],
      "key": "C major",
      "tokens": [
        {"roman": "IV", "role": "PD"},
        {"roman": "V7", "role": "D"},
        {"roman": "I", "role": "T"}
      ],
      "expected": {
        "voice_7_to_1": [false, false, true],
        "resolution_position": 2,
        "pattern_type": "leading_tone"
      }
    },
    {
      "name": "italian_augmented_sixth",
      "category": "augmented_sixths",
      "description": "♯4→5 resolution from Italian augmented sixth",
      "chord_symbols": ["C", "It+6", "G7", "C"],
      "key": "C major",
      "tokens": [
        {"roman": "I", "role": "T"},
        {"roman": "It+6", "role": "PD"},
        {"roman": "V7", "role": "D"},
        {"roman": "I", "role": "T"}
      ],
      "expected": {
        "fi_to_sol": [false, false, true, false],
        "resolution_position": 2,
        "pattern_type": "augmented_sixth"
      }
    },
    {
      "name": "french_augmented_sixth",
      "category": "augmented_sixths",
      "description": "♯4→5 resolution from French augmented sixth",
      "chord_symbols": ["C", "Fr+6", "G", "C"],
      "key": "C major",
      "tokens": [
        {"roman": "I", "role": "T"},
        {"roman": "Fr+6", "role": "PD"},
        {"roman": "V", "role": "D"},
        {"roman": "I", "role": "T"}
      ],
      "expected": {
        "fi_to_sol": [false, false, true, false],
        "resolution_position": 2,
        "pattern_type": "augmented_sixth"
      }
    },
    {
      "name": "german_augmented_sixth",
      "category": "augmented_sixths",
      "description": "♯4→5 resolution from German augmented sixth",
      "chord_symbols": ["Bb", "Ger+6", "F", "Bb"],
      "key": "Bb major",
      "tokens": [
        {"roman": "I", "role": "T"},
        {"roman": "Ger+6", "role": "PD"},
        {"roman": "V", "role": "D"},
        {"roman": "I", "role": "T"}
      ],
      "expected": {
        "fi_to_sol": [false, false, true, false],
        "resolution_position": 2,
        "pattern_type": "augmented_sixth"
      }
    },
    {
      "name": "phrygian_half_cadence",
      "category": "phrygian",
      "description": "♭6→5 resolution from Phrygian ii6 in minor",
      "chord_symbols": ["Am", "Dm/F", "E7", "Am"],
      "key": "A minor",
      "tokens": [
        {"roman": "i", "role": "T"},
        {"roman": "ii6", "role": "PD"},
        {"roman": "V7", "role": "D"},
        {"roman": "i", "role": "T"}
      ],
      "expected": {
        "le_to_sol": [false, false, true, false],
        "resolution_position": 2,
        "pattern_type": "phrygian"
      }
    },
    {
      "name": "multiple_voice_leading_complex",
      "category": "complex",
      "description": "Multiple voice-leading events in one progression",
      "chord_symbols": ["C/G", "G7", "C", "Fr+6", "G7", "C"],
      "key": "C major",
      "tokens": [
        {"roman": "I64", "role": "T"},
        {"roman": "V7", "role": "D"},
        {"roman": "I", "role": "T"},
        {"roman": "Fr+6", "role": "PD"},
        {"roman": "V7", "role": "D"},
        {"roman": "I", "role": "T"}
      ],
      "expected": {
        "voice_4_to_3": [false, true, false, false, false, false],
        "voice_7_to_1": [false, false, true, false, false, true],
        "fi_to_sol": [false, false, false, false, true, false],
        "pattern_type": "complex"
      }
    },
    {
      "name": "bach_style_suspension_chain",
      "category": "suspensions",
      "description": "Bach-style suspension chain with multiple 4→3 resolutions",
      "chord_symbols": ["C/G", "G7", "C/G", "G7", "C"],
      "key": "C major",
      "tokens": [
        {"roman": "I64", "role": "T"},
        {"roman": "V7", "role": "D"},
        {"roman": "I64", "role": "T"},
        {"roman": "V7", "role": "D"},
        {"roman": "I", "role": "T"}
      ],
      "expected": {
        "voice_4_to_3": [false, true, false, true, false],
        "voice_7_to_1": [false, false, false, false, true],
        "pattern_type": "suspension_chain"
      }
    }
  ],
  "melody_alignment_tests": [
    {
      "name": "simple_quarter_note_melody",
      "category": "melody_alignment",
      "description": "Simple quarter note melody aligned to chord changes",
      "melody_events": [
        {"onset": 0.0, "pitch": 60, "duration": 1.0},
        {"onset": 1.0, "pitch": 64, "duration": 1.0},
        {"onset": 2.0, "pitch": 67, "duration": 1.0}
      ],
      "chords": ["C", "F", "G"],
      "chord_timing": {
        "starts": [0.0, 1.0, 2.0],
        "ends": [1.0, 2.0, 3.0]
      },
      "expected": {
        "alignment": [1, 1, 1],
        "soprano_degrees": [1, 3, 1],
        "key": "C major"
      }
    },
    {
      "name": "syncopated_melody_overlap",
      "category": "melody_alignment",
      "description": "Syncopated melody with chord boundary overlaps",
      "melody_events": [
        {"onset": 0.5, "pitch": 67, "duration": 1.0},
        {"onset": 1.5, "pitch": 72, "duration": 1.5}
      ],
      "chords": ["C", "Am", "F"],
      "chord_timing": {
        "starts": [0.0, 1.0, 2.0],
        "ends": [1.0, 2.0, 3.0]
      },
      "expected": {
        "alignment": [1, 2, 1],
        "soprano_degrees": [5, 1, 1],
        "key": "C major"
      }
    },
    {
      "name": "complex_rhythmic_melody",
      "category": "melody_alignment",
      "description": "Complex rhythm with multiple events per chord",
      "melody_events": [
        {"onset": 0.0, "pitch": 60, "duration": 0.5},
        {"onset": 0.5, "pitch": 64, "duration": 0.5},
        {"onset": 1.0, "pitch": 67, "duration": 0.25},
        {"onset": 1.25, "pitch": 72, "duration": 0.75},
        {"onset": 2.0, "pitch": 69, "duration": 1.0}
      ],
      "chords": ["C", "F", "Am"],
      "chord_timing": {
        "starts": [0.0, 1.0, 2.0],
        "ends": [1.0, 2.0, 3.0]
      },
      "expected": {
        "alignment": [2, 2, 1],
        "soprano_degrees": [3, 1, 6],
        "key": "C major"
      }
    },
    {
      "name": "minor_key_melody_degrees",
      "category": "melody_alignment",
      "description": "Melody degree detection in minor key context",
      "melody_events": [
        {"onset": 0.0, "pitch": 69, "duration": 1.0},
        {"onset": 1.0, "pitch": 72, "duration": 1.0},
        {"onset": 2.0, "pitch": 68, "duration": 1.0}
      ],
      "chords": ["Am", "F", "G"],
      "chord_timing": {
        "starts": [0.0, 1.0, 2.0],
        "ends": [1.0, 2.0, 3.0]
      },
      "expected": {
        "alignment": [1, 1, 1],
        "soprano_degrees": [1, 3, 7],
        "key": "A minor"
      }
    }
  ],
  "edge_cases": [
    {
      "name": "empty_melody_graceful",
      "category": "melody_alignment",
      "description": "Graceful handling of empty melody",
      "melody_events": [],
      "chords": ["C", "F", "G"],
      "chord_timing": {
        "starts": [0.0, 1.0, 2.0],
        "ends": [1.0, 2.0, 3.0]
      },
      "expected": {
        "alignment": [0, 0, 0],
        "soprano_degrees": [null, null, null],
        "key": "C major"
      }
    },
    {
      "name": "single_chord_voice_leading",
      "category": "suspensions",
      "description": "Voice-leading with single chord (no resolution)",
      "chord_symbols": ["G7"],
      "key": "C major",
      "tokens": [
        {"roman": "V7", "role": "D"}
      ],
      "expected": {
        "voice_4_to_3": [false],
        "voice_7_to_1": [false],
        "fi_to_sol": [false],
        "le_to_sol": [false]
      }
    },
    {
      "name": "non_diatonic_melody_degrees",
      "category": "melody_alignment",
      "description": "Melody with chromatic notes (non-diatonic degrees)",
      "melody_events": [
        {"onset": 0.0, "pitch": 61, "duration": 1.0},
        {"onset": 1.0, "pitch": 66, "duration": 1.0}
      ],
      "chords": ["C", "F"],
      "chord_timing": {
        "starts": [0.0, 1.0],
        "ends": [1.0, 2.0]
      },
      "expected": {
        "alignment": [1, 1],
        "soprano_degrees": [null, null],
        "key": "C major"
      }
    }
  ]
}
